<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_08xj5fp" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.6.0">
  <bpmn:process id="userRegister" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_14kinr6</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_14kinr6" sourceRef="StartEvent_1" targetRef="Task_05szt9u" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0xcvave">
      <bpmn:incoming>SequenceFlow_1pswc6o</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_13wbexs</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1tvotvv</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1pswc6o" sourceRef="Task_05szt9u" targetRef="ExclusiveGateway_0xcvave" />
    <bpmn:sequenceFlow id="SequenceFlow_13wbexs" name="if CPF is on blacklist" sourceRef="ExclusiveGateway_0xcvave" targetRef="Task_0c1o5ls">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${existsInBlackList}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1tvotvv" name="if CPF isn&#39;t on blacklist" sourceRef="ExclusiveGateway_0xcvave" targetRef="Task_0lubrpz">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!existsInBlackList}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1sq1h75">
      <bpmn:incoming>SequenceFlow_1yns8vm</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1ezq2pm</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1ycvxyg</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1yns8vm" sourceRef="Task_0c1o5ls" targetRef="ExclusiveGateway_1sq1h75" />
    <bpmn:sequenceFlow id="SequenceFlow_1ezq2pm" name="CPF approved" sourceRef="ExclusiveGateway_1sq1h75" targetRef="Task_0lubrpz">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${callbackResponse}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1ycvxyg" name="CPF repproved" sourceRef="ExclusiveGateway_1sq1h75" targetRef="Task_1yt5qox">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!callbackResponse}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1xccdmb" sourceRef="Task_1yt5qox" targetRef="EndEvent_00wm1np" />
    <bpmn:endEvent id="EndEvent_1jau02h">
      <bpmn:incoming>SequenceFlow_10roqqj</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_10roqqj" sourceRef="Task_0lubrpz" targetRef="EndEvent_1jau02h" />
    <bpmn:serviceTask id="Task_05szt9u" name="Change customer status" camunda:asyncBefore="true" camunda:delegateExpression="${updateUserStatusTask}">
      <bpmn:incoming>SequenceFlow_14kinr6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pswc6o</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_0lubrpz" name="Register with success" camunda:asyncBefore="true" camunda:delegateExpression="${registerUserSuccessTask}">
      <bpmn:incoming>SequenceFlow_1tvotvv</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1ezq2pm</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_10roqqj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_1yt5qox" name="Register with error" camunda:asyncBefore="true" camunda:delegateExpression="${registerUserErrorTask}">
      <bpmn:incoming>SequenceFlow_1ycvxyg</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1xccdmb</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndEvent_00wm1np">
      <bpmn:incoming>SequenceFlow_1xccdmb</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Task_0c1o5ls" name="Validation and manual callback" camunda:asyncBefore="true" camunda:assignee="victorsantos">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="callbackResponse" label="Approve?" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_13wbexs</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1yns8vm</bpmn:outgoing>
    </bpmn:userTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="userRegister">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="159" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_14kinr6_di" bpmnElement="SequenceFlow_14kinr6">
        <di:waypoint x="188" y="177" />
        <di:waypoint x="270" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0xcvave_di" bpmnElement="ExclusiveGateway_0xcvave" isMarkerVisible="true">
        <dc:Bounds x="475" y="152" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1pswc6o_di" bpmnElement="SequenceFlow_1pswc6o">
        <di:waypoint x="370" y="177" />
        <di:waypoint x="475" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_13wbexs_di" bpmnElement="SequenceFlow_13wbexs">
        <di:waypoint x="500" y="152" />
        <di:waypoint x="500" y="80" />
        <di:waypoint x="580" y="80" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="522" y="126" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1tvotvv_di" bpmnElement="SequenceFlow_1tvotvv">
        <di:waypoint x="500" y="202" />
        <di:waypoint x="500" y="280" />
        <di:waypoint x="580" y="280" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="515" y="216" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1sq1h75_di" bpmnElement="ExclusiveGateway_1sq1h75" isMarkerVisible="true">
        <dc:Bounds x="735" y="152" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1yns8vm_di" bpmnElement="SequenceFlow_1yns8vm">
        <di:waypoint x="680" y="80" />
        <di:waypoint x="760" y="80" />
        <di:waypoint x="760" y="152" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1ezq2pm_di" bpmnElement="SequenceFlow_1ezq2pm">
        <di:waypoint x="760" y="202" />
        <di:waypoint x="760" y="280" />
        <di:waypoint x="680" y="280" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="684" y="253" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1ycvxyg_di" bpmnElement="SequenceFlow_1ycvxyg">
        <di:waypoint x="785" y="177" />
        <di:waypoint x="900" y="177" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="807" y="159" width="75" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1xccdmb_di" bpmnElement="SequenceFlow_1xccdmb">
        <di:waypoint x="1000" y="177" />
        <di:waypoint x="1082" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1jau02h_di" bpmnElement="EndEvent_1jau02h">
        <dc:Bounds x="612" y="382" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_10roqqj_di" bpmnElement="SequenceFlow_10roqqj">
        <di:waypoint x="630" y="320" />
        <di:waypoint x="630" y="382" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1oruqbj_di" bpmnElement="Task_05szt9u">
        <dc:Bounds x="270" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_03qxyoj_di" bpmnElement="Task_0lubrpz">
        <dc:Bounds x="580" y="240" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_1wb2oqk_di" bpmnElement="Task_1yt5qox">
        <dc:Bounds x="900" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0ch1lxi_di" bpmnElement="EndEvent_00wm1np">
        <dc:Bounds x="1082" y="159" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0zc3tjy_di" bpmnElement="Task_0c1o5ls">
        <dc:Bounds x="580" y="40" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
